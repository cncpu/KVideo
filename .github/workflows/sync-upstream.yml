name: Sync Upstream KVideo

on:
  schedule:
    # 每天北京时间早上8点同步 (UTC 0:00)
    - cron: '*/5 * * * *'
  workflow_dispatch:  # 支持手动触发

jobs:
  sync:
    runs-on: ubuntu-latest
    
    steps:
      - name: Sync upstream to main branch
        run: |
          # 克隆上游仓库
          git clone --bare https://github.com/KuekHaoYang/KVideo.git upstream-repo
          cd upstream-repo
          
          # 推送到自己的仓库（镜像方式，完全同步）
          git push --force "https://x-access-token:${{ secrets.GITHUB_TOKEN }}@github.com/${{ github.repository }}.git" main:main

